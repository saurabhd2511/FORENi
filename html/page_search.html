<!DOCTYPE html>
<html lang="en" class="">
   <head>
      <meta charset="utf-8" />
      <title>ForenI | Search</title>
      <meta name="description" content="app, web app, responsive, responsive layout, admin, admin panel, admin dashboard, flat, flat ui, ui kit, AngularJS, ui route, charts, widgets, components" />
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
      <link rel="stylesheet" href="../libs/assets/animate.css/animate.css" type="text/css" />
      <link rel="stylesheet" href="../libs/assets/font-awesome/css/font-awesome.min.css" type="text/css" />
      <link rel="stylesheet" href="../libs/assets/simple-line-icons/css/simple-line-icons.css" type="text/css" />
      <link rel="stylesheet" href="../libs/jquery/bootstrap/dist/css/bootstrap.css" type="text/css" />
      <link rel="stylesheet" href="css/font.css" type="text/css" />
      <link rel="stylesheet" href="css/app.css" type="text/css" />
      <link rel="shortcut icon" href="img/favicon.icoa" type="image/x-icon">
      <link rel="icon" href="img/favicon.ico" type="image/x-icon">
	  <link rel="stylesheet" href="css/jquery.auto-complete.css" type="text/css" />
   </head>
   <body>
      <div class="app app-header-fixed ">
      <header id="header" class="app-header navbar" role="menu">
         <div class="navbar-header bg-dark">
            <button class="pull-right visible-xs dk" ui-toggle-class="show" target=".navbar-collapse">
            <i class="glyphicon glyphicon-cog"></i>
            </button>
            <button class="pull-right visible-xs" ui-toggle-class="off-screen" target=".app-aside" ui-scroll="app">
            <i class="glyphicon glyphicon-align-justify"></i>
            </button>
            <a href="index.html" class="navbar-brand text-lt">
            <img src="img/logo2.png" alt=".">
            <span class="hidden-folded m-l-xs">ForenI</span>
            </a>
         </div>
         <div id="top_header" class="collapse pos-rlt navbar-collapse box-shadow bg-white-only">
            <div class="nav navbar-nav hidden-xs">
               <a href="#" class="btn no-shadow navbar-btn" ui-toggle-class="app-aside-folded" target=".app">
               <i class="fa fa-dedent fa-fw text"></i>
               <i class="fa fa-indent fa-fw text-active"></i>
               </a>
               <a href="#" class="btn no-shadow navbar-btn" ui-toggle-class="show" target="#aside-user">
               <i class="icon-user fa-fw"></i>
               </a>
            </div>
			 <a href="page_lockme.html" style="margin-left:480px"><img src="images/logoff.png"></a>
            <ul class="nav navbar-nav navbar-right">
               <li class="dropdown">
                  <a href="#" data-toggle="dropdown" class="dropdown-toggle clear" data-toggle="dropdown">
                  <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
                  <img src="img/a0.png" alt="...">
                  <i class="on md b-white bottom"></i>
                  </span>
                  <span class="hidden-sm hidden-md"><label id="UsersNameNav"></label></span> <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu animated fadeInRight w">
                     <li>
                        <a href="page_profile.html">Profile</a>
                     </li>
                     <li>
                        <a href="page_post.html">Post</a>
                     </li>
                     <li>
                        <a href="mail.html">Messenger</a>
                     </li>
                     <li class="divider"></li>
                     <li>
                        <a href="index.html">Logout</a>
                     </li>
                  </ul>
               </li>
            </ul>
         </div>
      </header>
      <aside id="aside" class="app-aside hidden-xs bg-dark">
         <div class="aside-wrap">
            <div class="navi-wrap">
               <div class="clearfix hidden-xs text-center hide" id="aside-user">
                  <div class="dropdown wrapper">
                     <a href="app.page.profile">
                     <span class="thumb-lg w-auto-folded avatar m-t-sm">
                     <img src="img/a0.png" class="img-full" alt="...">
                     </span>
                     </a>
                     <a href="#" data-toggle="dropdown" class="dropdown-toggle hidden-folded">
                     <span class="clear">
                     <span class="block m-t-sm">
                     <strong class="font-bold text-lt"><label id="UsersNameSide"></label></strong> 
                     <b class="caret"></b>
                     </span>
                     <span class="text-muted text-xs block"><label id="OrgName"></label></span>
                     </span>
                     </a>
                     <ul class="dropdown-menu animated fadeInRight w hidden-folded">
                        <li>
                           <a href="page_profile.html">Profile</a>
                        </li>
                        <li>
                           <a href="page_post.html">Post</a>
                        </li>
                        <li>
                           <a href="mail.html">Messenger</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                           <a href="index.html">Logout</a>
                        </li>
                     </ul>
                  </div>
               </div>
               <nav ui-nav class="navi clearfix">
                  <ul class="nav">
                     <li class="line dk"></li>
                     <li>
                        <a href="home.html">
                        <i class="glyphicon glyphicon-th icon text-info-lter"></i>
                        <span class="font-bold">Home</span>
                        </a>
                     </li>
                     <li>
                        <a href="dashboard.html">
                        <i class="glyphicon glyphicon-list-alt icon text-info-lter"></i>
                        <span class="font-bold">Dashboard</span>
                        </a>
                     </li>
                     <li>
                        <a href="page_search.html">
                        <i class="glyphicon glyphicon-search icon text-info-lter"></i>
                        <span class="font-bold">Search</span>
                        </a>
                     </li>
                     <li class="line dk"></li>
                     <li>
                        <a href="page_profile.html">
                           <i class="icon-user icon text-success-lter"></i>
                           <!-- <b class="badge bg-success pull-right">30%</b> -->
                           <span>Profile</span>
                        </a>
                     </li>
                     <li>
                        <a href="page_post.html">
                        <i class="icon-question icon"></i>
                        <span>Post</span>
                        </a>
                     </li>
                     <li>
                        <a href="mail.html">
                        <i class="glyphicon glyphicon-envelope icon text-info-lter"></i>
                        <span>Messenger</span>
                        </a>
                     </li>
                  </ul>
                  <li class="line dk"></li>
               </nav>
            </div>
         </div>
      </aside>
      <div id="content" class="app-content" role="main">
         <div class="app-content-body ">
            <div class="bg-light lter b-b wrapper-md">
               <h1 class="m-n font-thin h3"><i class="icon-magnifier i-sm m-r-sm"></i> Search</h1>
            </div>
            <div class="wrapper-md">
               <form onsubmit="$('#hero-demo').blur();return false;" action="#" class="m-b-md">
                  <div class="input-group">
                     <input id="hero-demo" type="text" class="form-control input-lg" placeholder="Search using keywords">
                     <span class="input-group-btn">
                     <button class="btn btn-lg btn-default" type="button" onclick="search()">Search</button>
                     </span>
                  </div>
               </form>
				<label id="times"></label> results found for <label id="resName"></label> 
               <div class="tab-container">
                  <ul class="nav nav-tabs">
                     <li class="active"><a href data-toggle="tab" data-target="#tab_1">All <span class="badge badge-sm m-l-xs"><label id="times2"></label></span></a></li>
                  </ul>
                  <tabset>
                     <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                           <ul class="list-group no-borders pull-in m-b-none">
                              <li class="list-group-item">
                                 <p id="searchTitle"><strong></strong></p>
                                 <div id="searchResult"></div>
                                 
                              </li>
                  
                             
                           </ul>
                        </div>
                     </div>
                  </tabset>
               </div>
            </div>
         </div>
         <footer id="footer" class="app-footer" role="footer">
            <div class="wrapper b-t bg-light">
               <span class="pull-right"><a href ui-scroll="app" class="m-l-sm text-muted"><i class="fa fa-long-arrow-up"></i></a></span>
               &copy;ForenI 2016.
            </div>
         </footer>
      </div>
	   </div>
	   
      <script src="../libs/jquery/jquery/dist/jquery.js"></script>
      <script src="../libs/jquery/bootstrap/dist/js/bootstrap.js"></script>
      <script src="js/ui-load.js"></script>
      <script src="js/ui-jp.config.js"></script>
      <script src="js/ui-jp.js"></script>
      <script src="js/ui-nav.js"></script>
      <script src="js/ui-toggle.js"></script>
      <script src="js/ui-client.js"></script>
	  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>	   	
	  <script src="js/jquery.auto-complete.min.js"></script>

	   <script type="application/javascript">
		function search(){
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", "http://52.39.5.137:8090/auth/userActivity", false);
		xmlhttp.send();
		objectJSON = xmlhttp.responseText;
		stringJSON = JSON.parse(objectJSON);
		for(var i = 0; i < stringJSON.length; i++) {
    	delete stringJSON[i]['_id'];
		}
			var stTime_arr = [];
			var srcNm_arr = [];
			var hstip_arr = [];
			var dstNm_arr = [];
			var dstip_arr = [];
			var stxt_arr = [];
			var data = JSON.stringify(stringJSON);
			for(var i = 0; i<stringJSON.length;i++){
				var stTime = stringJSON[i]['startTime'];
				var srcNm = stringJSON[i]['sourceName'];
				var hstip = stringJSON[i]['hostIP'];
				var dstNm = stringJSON[i]['destName'];
				var dstip = stringJSON[i]['destIP'];
				var stxt = stringJSON[i]['severityText'];
				
				stTime_arr.push(stTime + '<br />');
				srcNm_arr.push(srcNm + '<br />');
				hstip_arr.push(hstip + '<br />');
				dstip_arr.push(dstip + '<br />');
				dstNm_arr.push(dstNm + '<br />');
				stxt_arr.push(stxt);
			}
			var inp = document.getElementById("hero-demo").value;
			if(inp == "Start Time"){
				document.getElementById("searchResult").innerHTML = stTime_arr;
				document.getElementById("searchTitle").textContent = "Start Time";
				document.getElementById("times").textContent = stTime_arr.length;
				document.getElementById("times2").textContent = stTime_arr.length;
				document.getElementById("resName").textContent = "Start Time"
			}else if(inp == "Source Name"){
				document.getElementById("searchResult").innerHTML = srcNm_arr;
				document.getElementById("searchTitle").textContent = "Source Name";
				document.getElementById("times").textContent = srcNm_arr.length;
				document.getElementById("times2").textContent = srcNm_arr.length;
				document.getElementById("resName").textContent = "Source Name"
			}else if(inp == "Host IP"){
				document.getElementById("searchResult").innerHTML = hstip_arr;
				document.getElementById("searchTitle").textContent = "Host IP";
				document.getElementById("times").textContent = hstip_arr.length;
				document.getElementById("times2").textContent = hstip_arr.length;
				document.getElementById("resName").textContent = "Host IP"
			}else if(inp == "Destination Name"){
				document.getElementById("searchResult").innerHTML = dstNm_arr;
				document.getElementById("searchTitle").textContent = "Destination Name";
				document.getElementById("times").textContent = dstNm_arr.length;
				document.getElementById("times2").textContent = dstNm_arr.length;
				document.getElementById("resName").textContent = "Destination Name"
			}else if(inp == "Destination IP"){
				document.getElementById("searchResult").innerHTML = dstip_arr;
				document.getElementById("searchTitle").textContent = "Destination IP";
				document.getElementById("times").textContent = dstip_arr.length;
				document.getElementById("times2").textContent = dstip_arr.length;
				document.getElementById("resName").textContent = "Destination IP"
			}else if(inp == "Severity Text"){
				document.getElementById("searchResult").innerHTML = stxt_arr + "<br>";
				document.getElementById("searchTitle").textContent = "Severity Text";
				document.getElementById("times").textContent = stxt_arr.length;
				document.getElementById("times2").textContent = stxt_arr.length;
				document.getElementById("resName").textContent = "Severity Text"
			}
			
		}
			
		 $(function(){
            $('#hero-demo').autoComplete({
                minChars: 1,
                source: function(term, suggest){
                    term = term.toLowerCase();
                    var choices = ['Start Time', 'Source Name', 'Host IP', 'Destination Name', 'Destination IP', 'Severity Text'];
                    var suggestions = [];
                    for (i=0;i<choices.length;i++)
                        if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
                    suggest(suggestions);
                }
            });
        });
		
	</script>
	   <script type="application/javascript">
		var loginInfo = sessionStorage.getItem('Response');
		var extData = JSON.parse(loginInfo);
		document.getElementById("UsersNameNav").innerHTML = extData.name;
		document.getElementById("UsersNameSide").innerHTML = extData.name;
		document.getElementById("OrgName").innerHTML = extData.organizationName;
		</script>
   </body>
</html>